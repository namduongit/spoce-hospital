import{j as e,u as G,b as P,d as A,r as o,t as L}from"./index-wOwRfMo4.js";import{d as R}from"./day.constant-DMwPPS57.js";import{f as I}from"./format-date.util-D8g88DXU.js";const O=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function S(r,l){const a=new Date(l,r,1);for(var m=[];a.getMonth()===r;)m.push({weekDay:O[(a.getDay()+6)%7],weekNum:(a.getDay()+6)%7,month:a.getMonth(),year:a.getFullYear(),date:new Date(a)}),a.setDate(a.getDate()+1);return m}const D=r=>{const{dates:l,today:a,year:m}=r;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-2 sm:p-3 md:p-4 border border-gray-100 w-full",children:[e.jsx("div",{className:"text-center mb-3 sm:mb-4 md:mb-6",children:e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-800",children:["Tháng ",l.length>0?l[0].date.getMonth()+1:new Date().getMonth()+1," năm ",m]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:R.map(n=>e.jsx("div",{className:"text-center py-1 sm:py-2",children:e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-500",children:n.name})},n.id))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 md:gap-3",children:[Array.from({length:l.length>0&&l[0]?.weekNum||0},(n,c)=>e.jsx("div",{className:"aspect-square"},`empty-${c}`)),l&&l.length>0?l.map((n,c)=>{const h=a.toDateString()===n.date.toDateString(),x=r.selectDate&&r.selectDate.toDateString()===n.date.toDateString(),s=n.date<new Date(a.getFullYear(),a.getMonth(),a.getDate());return e.jsx("div",{className:"aspect-square",onClick:()=>{s||r.setSelectDate(n.date)},children:e.jsx("div",{className:`
                                    w-full h-full flex items-center justify-center p-1 sm:p-1.5 font-medium rounded-lg transition-all text-xs sm:text-sm md:text-base
                                    ${s?"text-gray-300 cursor-not-allowed":"cursor-pointer"}
                                    ${h&&!s?"bg-blue-500 text-white shadow-md":s?"":"hover:bg-gray-100 text-gray-700"}
                                    ${x&&!h&&!s?"ring-2 ring-blue-600 bg-blue-50":""}
                                `,children:n.date.getDate()})},c)}):e.jsx("div",{className:"col-span-7 text-center text-gray-500 py-4 text-xs sm:text-sm",children:"Đang tải lịch..."})]})]})]})},W=[{id:1,name:"07h đến 08h - Sáng",shift:"morning",value:"07h đến 08h - Sáng"},{id:2,name:"08h đến 09h - Sáng",shift:"morning",value:"08h đến 09h - Sáng"},{id:3,name:"09h đến 10h - Sáng",shift:"morning",value:"09h đến 10h - Sáng"},{id:4,name:"10h đến 11h - Sáng",shift:"morning",value:"10h đến 11h - Sáng"},{id:5,name:"11h đến 12h - Sáng",shift:"morning",value:"11h đến 12h - Sáng"},{id:6,name:"13h đến 14h - Chiều",shift:"afternoon",value:"13h đến 14h - Chiều"},{id:7,name:"14h đến 15h - Chiều",shift:"afternoon",value:"14h đến 15h - Chiều"},{id:8,name:"15h đến 16h - Chiều",shift:"afternoon",value:"15h đến 16h - Chiều"},{id:9,name:"16h đến 17h - Chiều",shift:"afternoon",value:"16h đến 17h - Chiều"},{id:10,name:"17h đến 18h - Chiều",shift:"afternoon",value:"17h đến 18h - Chiều"}],k=[{id:1,icon:e.jsx("i",{className:"fa-solid fa-calendar-days"}),name:"Thời gian và địa điểm",value:"time"},{id:2,icon:e.jsx("i",{className:"fa-solid fa-note-sticky"}),name:"Phiếu đăng ký khám",value:"form"}],J=()=>{const{execute:r,notify:l,loading:a}=G(),m=P(),n=A(),[c,h]=o.useState("time"),x=new Date,[s,u]=o.useState(x.getMonth()),[d,j]=o.useState(x.getFullYear()),[C,T]=o.useState([]),[M,V]=o.useState([]),[i,p]=o.useState(null),[g,N]=o.useState(""),[b,f]=o.useState({fullName:"",phone:"",date:"",time:"",note:""}),y=(t,v)=>{f(F=>({...F,[t]:v}))},w=()=>{f({fullName:"",phone:"",date:"",time:"",note:""}),h("time"),N(""),p(null)},q=()=>{i&&g?h("form"):m.showToast("Thông báo","Vui lòng chọn ngày và giờ khám","warning")},Y=()=>{s+1>11?(u(0),j(d+1)):u(s+1)},$=()=>{s-1<0?(u(11),j(d-1)):u(s-1)},E=async()=>{const t=await r(L(b));l(t,"Đăng ký lịch khám thành công!"),t?.result&&(w(),n("/page/account"))};return o.useEffect(()=>{T(S(s,d));const t=s+1>11?0:s+1,v=s+1>11?d+1:d;V(S(t,v))},[s,d]),o.useEffect(()=>{f(t=>({...t,date:i?I(i):"",time:g}))},[i,g]),e.jsx("div",{className:"w-full min-h-screen bg-gray-50",children:e.jsx("div",{className:"container mx-auto py-4 sm:py-8 md:py-12 lg:py-20 px-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-3 md:gap-4",children:[e.jsx("div",{className:"md:col-span-3 lg:col-span-4 xl:col-span-3 2xl:col-span-2",children:e.jsx("div",{className:"bg-white flex flex-row md:flex-col rounded-xl shadow gap-2 px-2 py-2 overflow-x-auto md:overflow-x-visible",children:k&&k.map(t=>e.jsxs("button",{className:`py-2 md:py-3 px-3 flex justify-start items-center gap-2 font-semibold whitespace-nowrap md:whitespace-normal transition-all
                                            ${c===t.value?"bg-blue-50 rounded border-l-3 md:border-l-4 border-blue-600 text-blue-500":"text-black hover:bg-blue-50 hover:text-blue-600"}`,onClick:()=>h(t.value),children:[t.icon,e.jsx("span",{className:"text-sm md:text-base",children:t.name})]},t.id))})}),e.jsx("div",{className:"md:col-span-9 lg:col-span-8 xl:col-span-6 2xl:col-span-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow px-4 sm:px-5 py-4",children:[c==="time"&&e.jsxs("div",{children:[e.jsx("h3",{className:"pt-2 text-lg sm:text-xl font-bold text-blue-600",children:"Chọn ngày khám bệnh"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Vui lòng chọn ngày chính xác để đăng ký"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-6 lg:gap-10 justify-center pb-5 pt-5",children:[e.jsx("div",{className:"w-full md:w-1/2 lg:w-auto",children:e.jsx(D,{dates:C,today:x,month:s,year:d,selectDate:i,setSelectDate:p})}),e.jsx("div",{className:"w-full md:w-1/2 lg:w-auto hidden sm:block",children:e.jsx(D,{dates:M,today:x,month:s+1,year:d,selectDate:i,setSelectDate:p})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end mb-5",children:[e.jsxs("button",{className:"flex items-center justify-center gap-1 bg-white ring-2 ring-blue-600 px-3 sm:px-4 py-2 rounded text-blue-600 font-semibold shadow hover:bg-blue-600 hover:text-white transition-all text-sm sm:text-base",onClick:$,children:[e.jsx("i",{className:"fa-solid fa-chevron-left"}),"Tháng trước"]}),e.jsxs("button",{className:"flex items-center justify-center gap-1 bg-white ring-2 ring-blue-600 px-3 sm:px-4 py-2 rounded text-blue-600 font-semibold shadow hover:bg-blue-600 hover:text-white transition-all text-sm sm:text-base",onClick:Y,children:["Tháng sau",e.jsx("i",{className:"fa-solid fa-chevron-right"})]})]})]}),c==="form"&&e.jsxs("div",{children:[e.jsx("h3",{className:"pt-2 text-lg sm:text-xl font-bold text-blue-600",children:"Điền thông tin khám"}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Điền thông tin chính xác để liên lạc"}),e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-5 mt-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-circle-user absolute top-1/2 -translate-y-1/2 mx-2 text-base sm:text-lg text-gray-400"}),e.jsx("input",{type:"text",value:b.fullName,onChange:t=>y("fullName",t.target.value),className:"w-full px-3 py-2 ps-9 sm:ps-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"Nhập họ và tên",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-phone absolute top-1/2 -translate-y-1/2 mx-2 text-base sm:text-lg text-gray-400"}),e.jsx("input",{type:"text",value:b.phone,onChange:t=>y("phone",t.target.value),className:"w-full px-3 py-2 border ps-9 sm:ps-10 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"Nhập số điện thoại",required:!0})]}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{rows:5,value:b.note,onChange:t=>y("note",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",placeholder:"Ghi chú",required:!0})}),e.jsx("div",{className:"flex justify-center sm:justify-end pb-6 sm:pb-10",children:e.jsx("button",{className:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white font-bold rounded hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",onClick:E,disabled:a,children:a?"Đang gửi...":"Gửi đăng ký"})})]})]})]})}),e.jsx("div",{className:"md:col-span-12 lg:col-span-12 xl:col-span-3 2xl:col-span-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow px-4 sm:px-5 py-4 lg:sticky lg:top-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-blue-600 mb-4",children:"Thời gian chọn"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"mb-0 md:mb-0 lg:mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ngày khám"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{readOnly:!0,className:"w-full border px-3 py-2 border-gray-300 rounded-lg text-gray-700 bg-gray-50 focus:outline-none text-sm sm:text-base",value:i?i.toLocaleDateString("vi-VN"):"Chưa chọn ngày",type:"text",placeholder:"Chọn ngày từ lịch"}),e.jsx("i",{className:"fa-solid fa-calendar-days absolute right-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{className:"mb-0 md:mb-0 lg:mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Giờ khám"}),e.jsxs("select",{className:"w-full border px-3 py-2 border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:border-blue-500 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",value:g,onChange:t=>N(t.target.value),disabled:!i,children:[e.jsx("option",{value:"",children:"Chọn giờ khám"}),W.map(t=>e.jsx("option",{value:t.value,children:t.name},t.id))]})]})]}),i&&g&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200 mb-4 mt-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 text-sm sm:text-base",children:[e.jsx("i",{className:"fa-solid fa-info-circle mr-1"}),"Thông tin đặt lịch"]}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ngày:"}),e.jsx("span",{className:"font-medium text-gray-800",children:i.toLocaleDateString("vi-VN")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Giờ:"}),e.jsx("span",{className:"font-medium text-gray-800",children:g})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("i",{className:"fa-solid fa-lightbulb mr-1"}),"Vui lòng chọn ngày và giờ phù hợp. Bệnh viện nghỉ trưa từ 12h-13h."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end mt-5 gap-2",children:[e.jsx("button",{className:"bg-blue-600 px-4 py-2 rounded text-white font-bold hover:bg-white hover:ring-2 hover:ring-blue-600 hover:text-blue-600 transition-all text-sm sm:text-base",onClick:q,children:"Tiếp theo"}),e.jsx("button",{className:"bg-orange-600 px-4 py-2 rounded text-white font-bold hover:bg-white hover:ring-2 hover:ring-orange-600 hover:text-orange-600 transition-all text-sm sm:text-base",onClick:w,children:"Làm mới"})]})]})})]})})})};export{J as default};
