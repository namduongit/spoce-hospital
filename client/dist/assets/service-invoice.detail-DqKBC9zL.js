import{d as g,u as N,j as e,c as f,f as j}from"./index-wOwRfMo4.js";import{a as p}from"./service-invoice.service-Bud_1WFk.js";import{a as u}from"./format-date.util-D8g88DXU.js";const C=l=>{const{serviceInvoiceSelect:s,setShowDetail:a,onSuccess:r}=l,i=g(),{execute:c,notify:n}=N(),d=t=>{switch(t){case"PENDING":return"text-yellow-800";case"COMPLETED":return"text-green-800";case"CANCELLED":return"text-red-800";default:return"text-gray-800"}},x=t=>{switch(t){case"PENDING":return"Chờ xử lý";case"COMPLETED":return"Đã hoàn thành";case"CANCELLED":return"Đã hủy";default:return t}},m=()=>{i(`/payment/service-invoice/${s.id}`)},o=async()=>{const t=await c(p(s.id,"CANCELLED"));n(t,"Hủy hóa đơn dịch vụ thành công"),t?.result&&(a(!1),r?.())};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-receipt text-blue-600"}),"Chi tiết hóa đơn dịch vụ #",s.id]}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-user text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Bệnh nhân"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.patientPhone!=="Không có số điện thoại"?f(s.patientPhone):"Không có SĐT"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-user-doctor text-green-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Bác sĩ chỉ định"}),e.jsx("p",{className:"font-semibold text-gray-900",children:s.doctorEmail}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Mã BS: #",s.doctorId]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-calendar text-purple-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ngày tạo hóa đơn"}),e.jsx("p",{className:"font-semibold text-gray-900",children:u(new Date(s.createAt))})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-orange-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Trạng thái"}),e.jsx("p",{className:`font-semibold ${d(s.status)}`,children:x(s.status)})]})]})]})}),s.medicalPackages&&s.medicalPackages.length>0&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-hand-holding-medical text-purple-600"}),"Danh sách gói dịch vụ (",s.medicalPackages.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"STT"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Tên gói dịch vụ"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"Giá"})]})}),e.jsx("tbody",{children:s.medicalPackages.map((t,h)=>e.jsxs("tr",{className:" hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:h+1}),e.jsx("td",{className:"py-3 px-4 font-medium",children:t.medicalPackageName}),e.jsx("td",{className:"py-3 px-4 text-right font-semibold text-blue-600",children:t.price.toLocaleString("vi-VN")})]},t.medicalPackageId))})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Tổng tiền: ",e.jsx("span",{className:"text-blue-600",children:j(s.totalAmount)})]})})})})]})]}),e.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"flex gap-2",children:s.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition flex items-center gap-2",children:"Hủy hóa đơn"}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center gap-2",children:"Tiến hành thanh toán"})]})}),e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})]})]})})};export{C as S};
