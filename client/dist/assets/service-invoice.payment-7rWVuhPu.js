import{h as y,d as f,u as p,r as o,j as e,f as r}from"./index-wOwRfMo4.js";import{b as N}from"./service-invoice.service-Bud_1WFk.js";import{v,m as w,c as I}from"./cash-ebzuvLo1.js";import{a as m}from"./format-date.util-D8g88DXU.js";import{c as P,a as C,b as k}from"./payment.service-CcC8hpiP.js";const V=()=>{const{id:n}=y(),x=f(),{execute:l,notify:i,showError:c,loading:h}=p(),[a,g]=o.useState({}),[t,d]=o.useState("vnpay"),j=async()=>{const s=await l(N(Number(n)));c(s),s?.result&&g(s.data)};o.useEffect(()=>{n&&j()},[n]);const u=async()=>{if(t==="vnpay"){const s=await l(P({orderType:"SERVICE INVOICE",orderId:Number(n)}));s?.result&&s.data.paymentUrl&&s.data.requestFrom?(i(s,"Đang chuyển đến cổng thanh toán VNPay"),window.location.href=s.data.paymentUrl):c(s);return}if(t==="momo"){const s=await l(C({orderType:"SERVICE INVOICE",orderId:Number(n)}));s?.result&&s.data.paymentUrl&&s.data.requestFrom?(i(s,"Đang chuyển đến cổng thanh toán Momo"),window.location.href=s.data.paymentUrl):c(s)}if(t==="cash"){const s=await l(k({orderType:"SERVICE INVOICE",orderId:Number(n)}));s?.result&&(i(s,"Thanh toán thành công"),s.data.directUrl&&setTimeout(()=>{window.location.href=s.data.directUrl},1e3))}};return h?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-lg",children:"Đang tải..."})}):a?e.jsx("div",{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-10 md:px-5 lg:px-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-5",children:"Thanh toán hóa đơn"}),e.jsxs("button",{onClick:()=>x(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-1",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Quay lại"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 border-b pb-3",children:"Thông tin hóa đơn"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Mã hóa đơn:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:a.id})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Trạng thái:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${a.status==="PAID"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.status==="PAID"?"Đã thanh toán":"Chưa thanh toán"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ngày tạo:"}),e.jsx("span",{className:"text-gray-900",children:m(new Date(a.createAt))})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Cập nhật:"}),e.jsx("span",{className:"text-gray-900",children:m(new Date(a.updateAt))})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Thông tin bệnh nhân"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Họ tên:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.patientName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Số điện thoại:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.patientPhone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.patientEmail||"Không có tài khoản"})]})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Chi tiết dịch vụ"}),e.jsx("div",{className:"space-y-3",children:a.medicalPackages?.map((s,b)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-gray-900 font-medium flex-1",children:s.medicalPackageName}),e.jsx("span",{className:"text-blue-600 font-semibold ml-4",children:r(s.price)})]})},b))})]}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Tổng tiền:"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:r(a.totalAmount)})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 border-b pb-3",children:"Phương thức thanh toán"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("div",{onClick:()=>d("vnpay"),className:`border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${t==="vnpay"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:v,alt:"VNPay",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"VNPay"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Thanh toán qua VNPay"})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t==="vnpay"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t==="vnpay"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),e.jsx("div",{onClick:()=>d("momo"),className:`border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${t==="momo"?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:w,alt:"Momo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Momo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ví điện tử Momo"})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t==="momo"?"border-pink-500 bg-pink-500":"border-gray-300"}`,children:t==="momo"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),e.jsx("div",{onClick:()=>d("cash"),className:`border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${t==="cash"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:I,alt:"cash",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Tiền mặt"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sử dụng tiền mặt để thanh toán"})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t==="cash"?"border-green-500 bg-green-500":"border-gray-300"}`,children:t==="cash"&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-700",children:"Tổng hóa đơn:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:r(a.totalAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Số tiền thanh toán:"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:r(a.totalAmount)})]})]}),e.jsx("button",{onClick:u,disabled:a.status==="PAID",className:`w-full py-4 px-6 rounded-lg font-semibold text-white text-lg transition-all ${a.status==="PAID"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95 shadow-lg hover:shadow-xl"}`,children:a.status==="PAID"?"Đã thanh toán":"Thanh toán ngay"}),a.status!=="PAID"&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:'Bằng việc nhấn "Thanh toán ngay", bạn đồng ý với điều khoản sử dụng của chúng tôi'})]})]})]})}):e.jsx("div",{className:"flex items-center justify-center h-screen m-auto",children:e.jsxs("div",{className:"flex flex-col items-center text-gray-500 space-y-1",children:[e.jsx("i",{className:"fa-solid fa-clipboard-question text-6xl"}),e.jsx("div",{className:"text-lg",children:"Không tìm thấy hóa đơn"}),e.jsxs("span",{children:["Mã tìm: ",n]})]})})};export{V as default};
