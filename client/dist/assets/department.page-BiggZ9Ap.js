import{u as w,r as d,j as e}from"./index-wOwRfMo4.js";import{r as T}from"./status.constant-BZ6KLHNH.js";import{c as R,g as L}from"./department.service-9tPTb8oj.js";import{T as D}from"./pagination-DByYZh53.js";import{u as E,c as I,g as A}from"./room.service-B3xNNr7b.js";const P=o=>{const{departments:s,setIsOpenCreateDepartment:m,onSuccess:a}=o,{execute:h,notify:c,loading:p}=w(),[i,f]=d.useState(""),x=async t=>{t.preventDefault();const u=await h(R(i));c(u,"Thêm khoa khám thành công"),u?.result&&(b(),a?.())},b=()=>{f(""),m(!1)};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Thêm khoa khám"}),e.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:x,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên khoa khám"}),e.jsx("input",{type:"text",value:i,onChange:t=>f(t.target.value),className:"w-full px-3 py-2 border text-gray-600 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Danh sách khoa khám"}),e.jsx("select",{className:`w-full border border-gray-300 rounded-md px-3 py-2 text-sm ${s.length===0?"bg-gray-50 text-gray-600":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}`,disabled:s.length===0,children:s.length>0?s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id)):e.jsx("option",{children:"Chưa có khoa khám"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:b,className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",children:"Đóng"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"Đang thêm...":"Thêm khoa"})]})]})]})})},F=o=>{const{departmentSelect:s,setShowDetail:m}=o;return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-hospital text-blue-600"}),"Chi tiết khoa #",s.id]}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"Thông tin cơ bản"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên khoa"}),e.jsx("p",{className:"text-gray-900 font-medium text-lg",children:s.name})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-chart-bar text-green-600"}),"Thống kê tổng quan"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bác sĩ"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.doctors?.length||0})]}),e.jsx("div",{className:"text-blue-600",children:e.jsx("i",{className:"fa-solid fa-user-doctor text-2xl"})})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Phòng khám"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.rooms?.length||0})]}),e.jsx("div",{className:"text-green-600",children:e.jsx("i",{className:"fa-solid fa-door-open text-2xl"})})]})}),e.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lịch hẹn"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.appointments?.length||0})]}),e.jsx("div",{className:"text-orange-600",children:e.jsx("i",{className:"fa-solid fa-calendar-check text-2xl"})})]})})]})]}),s.doctors&&s.doctors.length>0&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-doctor text-blue-600"}),"Danh sách bác sĩ (",s.doctors.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[s.doctors.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.fullName||"Chưa cập nhật"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.degree||"Chưa cập nhật"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="AVAILABLE"?"bg-green-100 text-green-800":a.status==="BUSY"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.status==="AVAILABLE"?"Sẵn sàng":a.status==="BUSY"?"Bận":"Nghỉ"})]},a.id)),s.doctors.length>5&&e.jsxs("p",{className:"text-sm text-gray-500 text-center py-2",children:["và ",s.doctors.length-5," bác sĩ khác..."]})]})]}),s.rooms&&s.rooms.length>0&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open text-green-600"}),"Danh sách phòng khám (",s.rooms.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.rooms.map(a=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phòng #",a.id]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="EMPTY"?"bg-green-100 text-green-800":a.status==="FULL"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:a.status==="EMPTY"?"Trống":a.status==="FULL"?"Đầy":"Sửa chữa"})]},a.id))})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},q=o=>{const{departmentSelect:s,setShowEdit:m}=o,[a,h]=d.useState({name:""}),c=(i,f)=>{h(x=>({...x,[i]:f}))};d.useEffect(()=>{h({name:s.name||""})},[s]);const p=async i=>{i.preventDefault(),alert("Chức năng đang được phát triển"),m(!1)};return e.jsx("div",{className:"fixed top-0 start-0 bg-gray-400/60 w-full h-full z-10 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa thông tin khoa - # ",s.id]}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên khoa *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.name,placeholder:"Nhập tên khoa",onChange:i=>c("name",i.target.value)})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>m(!1),children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",children:"Lưu thay đổi"})]})]})]})})},O=o=>{const{departments:s,onSuccess:m}=o,[a,h]=d.useState(1),[c,p]=d.useState(5),[i,f]=d.useState(!1),[x,b]=d.useState(!1),[t,u]=d.useState(null),r=n=>{u(n),f(!0)},y=n=>{u(n),b(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên khoa"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Số phòng khám"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Số bác sĩ"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Số phiếu khám"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s&&s.length>0?s.slice((a-1)*c,a*c).map((n,g)=>e.jsxs("tr",{className:`${g%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",n.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:n.name}),e.jsxs("td",{className:"px-4 py-3 text-sm text-green-700 font-medium",children:[n.rooms.length," phòng khám"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-blue-700 font-medium",children:[n.doctors.length," bác sĩ"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-purple-700 font-medium",children:[n.appointments.length," phiếu khám"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>r(n),title:"Xem chi tiết",children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>y(n),title:"Chỉnh sửa",children:e.jsx("i",{className:"fa-solid fa-wrench"})})]})})]},n.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-warehouse text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có khoa nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(D,{array:s,page:a,row:c,setPage:h,setRow:p}),i&&t&&e.jsx(F,{departmentSelect:t,setShowDetail:f}),x&&t&&e.jsx(q,{departmentSelect:t,setShowEdit:b,onSuccess:m})]})},U=o=>{const{roomSelect:s,setShowDetail:m}=o,a=c=>{switch(c){case"EMPTY":return"text-green-800";case"FULL":return"text-blue-700";case"REPAIR":return"text-yellow-800";default:return"text-gray-800"}},h=c=>{switch(c){case"EMPTY":return"Còn trống";case"FULL":return"Đã đầy";case"REPAIR":return"Đang sửa chữa";default:return c}};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-door-open text-blue-600"}),"Chi tiết phòng khám #",s.id]}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"Thông tin phòng khám"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên phòng"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mã khoa"}),e.jsx("p",{className:"text-gray-900",children:s.departmentId})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên khoa"}),e.jsx("p",{className:"text-gray-900",children:s.departmentName})]}),e.jsxs("div",{className:"text-left md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Trạng thái"}),e.jsx("span",{className:`font-bold ${a(s.status)}`,children:h(s.status)})]})]})]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},Y=o=>{const{roomSelect:s,departments:m,setShowEdit:a,onSuccess:h}=o,{execute:c,notify:p,doFunc:i,loading:f}=w(),[x,b]=d.useState({name:"",status:"",departmentId:0}),t=(r,y)=>{b(n=>({...n,[r]:y}))},u=async r=>{r.preventDefault();const y=await c(E(s.id,x));p(y,"Cập nhật phòng khám thành công"),i(()=>{h?.(),a(!1)})};return d.useEffect(()=>{b({name:s.name,status:s.status,departmentId:s.departmentId})},[s]),e.jsx("div",{className:"fixed top-0 start-0 bg-gray-400/60 w-full h-full z-10 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa phòng - # ",s.id]}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:u,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên phòng khám"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:x.name,onChange:r=>t("name",r.target.value)})})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chọn khoa"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,value:x.departmentId,onChange:r=>t("departmentId",r.target.value),children:[e.jsx("option",{value:"",children:"Chưa chọn"}),m.map(r=>e.jsx("option",{value:r.id,selected:r.id.toString()===x.departmentId.toString(),children:r.name},r.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng thái"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,value:x.status,onChange:r=>t("status",r.target.value),children:[e.jsx("option",{value:"",children:"Chưa chọn"}),T.map(r=>e.jsx("option",{value:r.value,selected:r.value===s.status,children:r.name},r.id))]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>a(!1),children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",children:f?"Đang cập nhật...":"Lưu thay đổi"})]})]})]})})},B=o=>{const{rooms:s,departments:m,onSuccess:a}=o,[h,c]=d.useState(1),[p,i]=d.useState(5),[f,x]=d.useState(!1),[b,t]=d.useState(!1),[u,r]=d.useState({}),y=g=>{r(g),x(!0)},n=g=>{r(g),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên phòng"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Thuộc khoa"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Trạng thái"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s&&s.length>0?s.slice((h-1)*p,h*p).map((g,v)=>e.jsxs("tr",{className:`${v%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",g.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:g.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:g.departmentName?g.departmentName:"Chưa có khoa"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:[g.status==="EMPTY"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold",children:"Trống"}),g.status==="FULL"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-red-100 text-red-800 text-xs font-semibold",children:"Đầy"}),g.status==="REPAIR"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs font-semibold",children:"Sửa chữa"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>y(g),children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>n(g),children:e.jsx("i",{className:"fa-solid fa-wrench"})})]})})]},g.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-door-open text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có phòng nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(D,{array:o.rooms,page:h,row:p,setPage:c,setRow:i}),f&&e.jsx(U,{roomSelect:u,setShowDetail:x}),b&&e.jsx(Y,{roomSelect:u,departments:m,setShowEdit:t,onSuccess:a})]})},M=o=>{const{departments:s,setIsOpenCreateRoom:m,onSuccess:a}=o,{execute:h,notify:c,loading:p}=w(),[i,f]=d.useState({name:"",status:"",departmentId:0}),x=(t,u)=>{f(r=>({...r,[t]:u}))},b=async t=>{t.preventDefault();const u=await h(I(i));c(u,"Thêm phòng khám thành công"),u?.result&&(m(!1),a?.())};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Tạo phòng khám"}),e.jsx("button",{onClick:()=>o.setIsOpenCreateRoom(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên phòng khám"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:i.name,onChange:t=>x("name",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập tên phòng khám",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thuộc về khoa"}),e.jsxs("select",{value:i.departmentId,onChange:t=>x("departmentId",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Chọn khoa khám"}),s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng thái"}),e.jsxs("select",{value:i.status,onChange:t=>x("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),T.map(t=>e.jsx("option",{value:t.value,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o.setIsOpenCreateRoom(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",children:"Hủy"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",children:p?"Đang thêm...":"Thêm phòng"})]})]})]})})},K=()=>{const{execute:o}=w(),[s,m]=d.useState("department"),[a,h]=d.useState([]),[c,p]=d.useState([]),[i,f]=d.useState([]),[x,b]=d.useState([]),[t,u]=d.useState(!1),[r,y]=d.useState(!1),[n,g]=d.useState({input:"",status:""}),v=(l,j)=>{g(C=>({...C,[l]:j}))},k=async()=>{const l=await o(L());if(l?.result){const j=l.data;h(Array.isArray(j)?j:[]),p(Array.isArray(j)?j:[])}},S=async()=>{const l=await o(A());if(l?.result){const j=l.data;f(Array.isArray(j)?j:[]),b(Array.isArray(j)?j:[])}};d.useEffect(()=>{s==="department"?p(a.filter(l=>n.input===""||l.name?.toLowerCase().includes(n.input.toLowerCase())||l.id?.toString().includes(n.input))):b(i.filter(l=>{const j=n.input===""||l.name?.toLowerCase().includes(n.input.toLowerCase())||l.id?.toString().includes(n.input)||l.departmentName?.toLowerCase().includes(n.input.toLowerCase()),C=n.status===""||l.status===n.status;return j&&C}))},[n,a,i]),d.useEffect(()=>{k(),S()},[]);const N={totalDepartments:a.length,totalRooms:i.length,activeRooms:i.filter(l=>l.status==="EMPTY").length,inactiveRooms:i.filter(l=>l.status==="FULL").length,maintenanceRooms:i.filter(l=>l.status==="REPAIR").length};return e.jsxs("main",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-blue-700 mb-2 sm:mb-0",children:"Quản lý phòng khám & khoa khám"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Quản lý các phòng và khoa khám trong bệnh viện"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Tổng: ",e.jsx("span",{className:"font-semibold text-blue-600",children:N.totalRooms})," phòng khám"]}),e.jsxs("div",{children:["Tổng: ",e.jsx("span",{className:"font-semibold text-blue-600",children:N.totalDepartments})," khoa khám"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-building text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng khoa"}),e.jsx("p",{className:"text-lg font-semibold",children:N.totalDepartments})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-door-open text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng phòng"}),e.jsx("p",{className:"text-lg font-semibold",children:N.totalRooms})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-check-circle text-purple-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phòng hoạt động"}),e.jsx("p",{className:"text-lg font-semibold",children:N.activeRooms})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-circle-xmark text-orange-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phòng hết chỗ"}),e.jsx("p",{className:"text-lg font-semibold",children:N.inactiveRooms})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-tools text-red-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bảo trì"}),e.jsx("p",{className:"text-lg font-semibold",children:N.maintenanceRooms})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:space-x-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Tìm kiếm"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),e.jsx("input",{type:"text",value:n.input,onChange:l=>v("input",l.target.value),className:"border border-gray-300 rounded-md py-2 pl-10 pr-4 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Tìm kiếm theo tên hoặc id ..."})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Trạng thái"}),e.jsxs("select",{className:`w-full border border-gray-300 rounded-md py-2 px-3 text-sm ${s==="department"?"bg-gray-50 text-gray-600":"focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}`,disabled:s==="department",value:n.status,onChange:l=>v("status",l.target.value),children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),T.map(l=>e.jsx("option",{value:l.value,children:l.name},l.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Trang quản lý"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:s,onChange:l=>m(l.target.value),children:[e.jsx("option",{value:"department",children:"Quản lý khoa"}),e.jsx("option",{value:"room",children:"Quản lý phòng"})]})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-2",children:[e.jsxs("button",{className:"font-semibold bg-blue-600 text-white hover:text-blue-600 hover:bg-white hover:ring-3 hover:ring-blue-600 px-4 py-2 rounded shadow cursor-pointer flex items-center",onClick:()=>y(!0),children:[e.jsx("i",{className:"fa-solid fa-plus me-2"}),e.jsx("span",{children:"Thêm phòng"})]}),e.jsxs("button",{className:"font-semibold bg-blue-600 text-white hover:text-blue-600 hover:bg-white hover:ring-3 hover:ring-blue-600 px-4 py-2 rounded shadow cursor-pointer flex items-center",onClick:()=>u(!0),children:[e.jsx("i",{className:"fa-solid fa-plus me-2"}),e.jsx("span",{children:"Thêm khoa"})]})]})]}),e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[s==="department"&&e.jsx(O,{departments:c,onSuccess:k}),s==="room"&&e.jsx(B,{rooms:x,departments:a,onSuccess:S})]})})]}),t&&e.jsx(P,{setIsOpenCreateDepartment:u,departments:c,onSuccess:k}),r&&e.jsx(M,{setIsOpenCreateRoom:y,onSuccess:S,departments:c})]})};export{K as default};
