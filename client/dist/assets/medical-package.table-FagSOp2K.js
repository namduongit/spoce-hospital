import{u as y,r as m,j as e,f}from"./index-wOwRfMo4.js";import{c as k,u as S,a as T}from"./medical-package.service-WOpOC3JI.js";import{m as E}from"./status.constant-BZ6KLHNH.js";import{T as I}from"./pagination-DByYZh53.js";const H=x=>{const{setIsOpenCreateMedicalPackage:s,onSuccess:i}=x,{execute:h,notify:u,loading:r}=y(),[n,l]=m.useState({name:"",description:"",status:"",price:""}),d=(t,o)=>{l(b=>({...b,[t]:o}))},c=()=>{l({name:"",description:"",status:"",price:""}),s(!1)},g=async t=>{t.preventDefault();const o=await h(k(n));u(o,"Tạo gói dịch vụ thành công"),o?.result&&(c(),i?.())};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Tạo gói dịch vụ mới"}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{className:"space-y-4",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên gói dịch vụ"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",name:"name",value:n.name,onChange:t=>d("name",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập tên gói dịch vụ"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giá tiền"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"1000",value:n.price,placeholder:"Nhập giá tiền",onChange:t=>d("price",t.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Number(n.price)>0&&`≈ ${f(Number(n.price))}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả"}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{rows:3,value:n.description,onChange:t=>d("description",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập mô tả"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng thái"}),e.jsxs("select",{value:n.status,onChange:t=>d("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),E.map(t=>e.jsx("option",{value:t.value,children:t.name},t.id))]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",children:"Đóng"}),e.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",children:r?"Đang thêm...":"Thêm gói dịch vụ"})]})]})]})})},A=x=>{const{medicalPackageSelect:s,setShowEdit:i,onSuccess:h}=x,{execute:u,notify:r,loading:n}=y(),[l,d]=m.useState({name:"",description:"",price:"",status:""}),c=(t,o)=>{d(b=>({...b,[t]:o}))},g=async()=>{const t=await u(S(s.id,l));r(t,"Cập nhật gói khám thành công"),t?.result&&(h?.(),i(!1))};return m.useEffect(()=>{d({name:s.name||"",description:s.description||"",price:s.price?s.price.toString():"",status:s.status||""})},[s]),e.jsx("div",{className:"fixed top-0 start-0 w-full h-full bg-gray-400/60 flex items-center justify-center z-20",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg shadow-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa gói khám - # ",s.id]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Tên gói khám *"}),e.jsx("input",{type:"text",required:!0,value:l.name,placeholder:"Nhập tên gói khám",onChange:t=>c("name",t.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Mô tả"}),e.jsx("textarea",{rows:3,value:l.description,placeholder:"Nhập mô tả gói khám",onChange:t=>c("description",t.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Giá tiền (VND) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",required:!0,min:"0",step:"1000",value:l.price,placeholder:"Nhập giá tiền",onChange:t=>c("price",t.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Number(l.price)>0&&`≈ ${f(Number(l.price))}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Trạng thái *"}),e.jsxs("select",{value:l.status,required:!0,onChange:t=>c("status",t.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),e.jsx("option",{value:"ACTIVE",children:"Hoạt động"}),e.jsx("option",{value:"INACTIVE",children:"Dừng hoạt động"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>i(!1),disabled:n,children:"Hủy"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex-1 transition",onClick:g,disabled:n||!l.name||!l.status||Number(l.price)<=0,children:n?"Đang xử lý...":"Cập nhật"})]})]})})},D=x=>{const{medicalPackageSelect:s,setShowDetail:i}=x,h=r=>r==="ACTIVE"?"text-green-800":"text-red-800",u=r=>r==="ACTIVE"?"Hoạt động":"Dừng hoạt động";return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-box-open text-blue-600"}),"Chi tiết gói dịch vụ #",s.id]}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"Thông tin cơ bản"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên gói dịch vụ"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.name})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Trạng thái"}),e.jsx("span",{className:`font-bold ${h(s.status)}`,children:u(s.status)})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Giá gói"}),e.jsx("p",{className:"font-semibold text-lg text-green-600",children:f(s.price)})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-text text-green-600"}),"Mô tả chi tiết"]}),e.jsx("div",{className:"text-gray-900 whitespace-pre-wrap",children:s.description||"Chưa có mô tả"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},R=x=>{const{medicalPackages:s,onSuccess:i}=x,{execute:h,notify:u}=y(),[r,n]=m.useState(1),[l,d]=m.useState(5),[c,g]=m.useState(!1),[t,o]=m.useState(!1),[b,j]=m.useState({}),v=a=>{j(a),g(!0)},w=a=>{j(a),o(!0)},C=async(a,p)=>{const N=await h(T(a.id,p));u(N,p==="INACTIVE"?"Tạm dừng gói dịch vụ thành công":"Kích hoạt gói dịch vụ thành công"),N?.result&&i?.()};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên gói khám"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Giá tiền"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Trạng thái"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s&&s.length>0?s.slice((r-1)*l,r*l).map((a,p)=>e.jsxs("tr",{className:`${p%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",a.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-blue-600",children:f(a.price)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium 
                                                                            ${a.status==="INACTIVE"?"bg-yellow-100 text-yellow-800":""}
                                                                            ${a.status==="ACTIVE"?"bg-green-100 text-green-700":""}
                                                                        `,children:a.status==="INACTIVE"?"Dừng hoạt động":"Họat động"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>v(a),children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>w(a),children:e.jsx("i",{className:"fa-solid fa-wrench"})}),"                                    ",e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>C(a,a.status==="ACTIVE"?"INACTIVE":"ACTIVE"),children:e.jsx("i",{className:`fa-solid ${a.status==="ACTIVE"?"fa-lock":"fa-lock-open"}`})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-box-open text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có gói khám nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(I,{array:x.medicalPackages,page:r,row:l,setPage:n,setRow:d}),c&&e.jsx(D,{medicalPackageSelect:b,setShowDetail:g}),t&&e.jsx(A,{medicalPackageSelect:b,setShowEdit:o,onSuccess:i})]})};export{H as A,R as M};
