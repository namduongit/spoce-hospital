import{j as e,f as N,u as y,r as h}from"./index-wOwRfMo4.js";import{T as v}from"./pagination-DByYZh53.js";import{m as k}from"./medicine.constant-CpMBuXEb.js";import{u as C,b as T,c as D,d as M}from"./medicine.service-Cwwuf_rk.js";const I=g=>{const{medicineSelect:s,setShowDetail:o}=g,u=l=>l==="ACTIVE"?"text-green-800":"text-red-800",b=l=>l==="ACTIVE"?"Đang kinh doanh":"Ngừng kinh doanh",r=((l,a,i)=>l<=a?{color:"text-red-600",text:"Thiếu hàng"}:l>=i?{color:"text-orange-600",text:"Tồn kho cao"}:{color:"text-green-600",text:"Bình thường"})(s.currentStock,s.minStock,s.maxStock);return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-pills text-blue-600"}),"Chi tiết thuốc #",s.id]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"Thông tin cơ bản"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên thuốc"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Đơn vị"}),e.jsx("p",{className:"text-gray-900",children:s.unit})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Trạng thái"}),e.jsx("p",{className:`font-bold ${u(s.status)}`,children:b(s.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nhà sản xuất"}),e.jsx("p",{className:"text-gray-900",children:s.manufacturer})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Loại thuốc"}),e.jsx("p",{className:"text-gray-900",children:s.categoryName})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-dollar-sign text-green-600"}),"Thông tin giá"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Giá bán"}),e.jsx("p",{className:"font-semibold text-lg text-green-600",children:N(s.price)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Giá nhập"}),e.jsx("p",{className:"font-semibold text-lg text-blue-600",children:"Chưa cập nhật"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-warehouse text-orange-600"}),"Thông tin tồn kho"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tồn kho hiện tại"}),e.jsxs("p",{className:`font-semibold text-lg ${r.color}`,children:[s.currentStock," ",s.unit]}),e.jsx("p",{className:`text-sm ${r.color}`,children:r.text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tồn kho tối thiểu"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[s.minStock," ",s.unit]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tồn kho tối đa"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[s.maxStock," ",s.unit]})]})]})]}),s.description&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-text text-purple-600"}),"Mô tả"]}),e.jsx("div",{className:"text-gray-900 whitespace-pre-wrap",children:s.description})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},E=g=>{const{medicineSelect:s,categories:o,setShowEdit:u,onSuccess:b}=g,{execute:x,notify:r,loading:l}=y();console.log("Medicine to edit:",s);const[a,i]=h.useState({name:"",description:"",unit:"",price:"",minStock:"",maxStock:"",manufacturer:"",categoryId:"",status:""}),d=(t,m)=>{i(f=>({...f,[t]:m}))};h.useEffect(()=>{i({name:s.name||"",description:s.description||"",unit:s.unit||"",price:s.price?s.price.toString():"",minStock:s.minStock?s.minStock.toString():"",maxStock:s.maxStock?s.maxStock.toString():"",manufacturer:s.manufacturer||"",categoryId:s.categoryId?s.categoryId.toString():"",status:s.status||""})},[s]);const n=async t=>{t.preventDefault();const m=await x(C(s.id,{name:a.name,description:a.description,unit:a.unit,price:Number(a.price),manufacturer:a.manufacturer,status:a.status,minStock:Number(a.minStock),maxStock:Number(a.maxStock),categoryId:Number(a.categoryId)}));r(m,"Cập nhật thuốc thành công"),m?.result&&(b?.(),u(!1))};return e.jsx("div",{className:"fixed top-0 start-0 bg-gray-400/60 w-full h-full z-10 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa thông tin thuốc - # ",s.id]}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên thuốc"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.name,placeholder:"Nhập tên thuốc",onChange:t=>d("name",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loại thuốc"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.categoryId,onChange:t=>d("categoryId",t.target.value),children:[e.jsx("option",{value:"",children:"Chọn loại thuốc"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Đơn vị"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.unit,placeholder:"Viên, chai, hộp...",onChange:t=>d("unit",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng thái"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.status,onChange:t=>d("status",t.target.value),children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),k.map(t=>e.jsx("option",{value:t.value,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giá bán (VND)"}),e.jsx("input",{type:"number",min:"0",step:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.price,placeholder:"Giá bán",onChange:t=>d("price",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tồn kho tối thiểu"}),e.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.minStock,placeholder:"Số lượng tối thiểu",onChange:t=>d("minStock",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tồn kho tối đa"}),e.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.maxStock,placeholder:"Số lượng tối đa",onChange:t=>d("maxStock",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nhà sản xuất"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.manufacturer,placeholder:"Tên nhà sản xuất",onChange:t=>d("manufacturer",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",value:a.description,placeholder:"Mô tả về thuốc",onChange:t=>d("description",t.target.value)})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>u(!1),children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",disabled:l,children:l?"Đang cập nhật...":"Lưu thay đổi"})]})]})]})})},G=g=>{const{medicines:s,categories:o=[],onSuccess:u}=g,[b,x]=h.useState(1),[r,l]=h.useState(5),[a,i]=h.useState(!1),[d,n]=h.useState(!1),[t,m]=h.useState(null),f=c=>{m(c),i(!0)},p=c=>{m(c),n(!0)},j=c=>{switch(c){case"ACTIVE":return"bg-green-100 text-green-800";case"OUT_OF_STOCK":return"bg-red-100 text-red-800";case"INACTIVE":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=c=>{switch(c){case"ACTIVE":return"Hoạt động";case"OUT_OF_STOCK":return"Hết hàng";case"INACTIVE":return"Không hoạt động";default:return c}};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên thuốc"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Loại thuốc"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Đơn vị"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Giá bán"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tồn kho"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Trạng thái"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s&&s.length>0?s.slice((b-1)*r,b*r).map((c,w)=>e.jsxs("tr",{className:`${w%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",c.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500",children:c.description})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:c.categoryName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:c.unit}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:N(c.price)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{children:[e.jsxs("p",{className:`font-medium ${c.currentStock<c.minStock?"text-red-600":"text-blue-600"}`,children:[c.currentStock," ",c.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",c.minStock]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(c.status)}`,children:S(c.status)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>f(c),title:"Xem chi tiết",children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>p(c),title:"Chỉnh sửa",children:e.jsx("i",{className:"fa-solid fa-wrench"})})]})})]},c.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-pills text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có thuốc nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(v,{array:s,page:b,row:r,setPage:x,setRow:l}),a&&t&&e.jsx(I,{medicineSelect:t,setShowDetail:i}),d&&t&&e.jsx(E,{medicineSelect:t,categories:o,setShowEdit:n,onSuccess:u})]})},V=g=>{const{medicineCategorySelect:s,setShowDetail:o}=g;return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-tags text-blue-600"}),"Chi tiết loại thuốc #",s.id]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600"}),"Thông tin cơ bản"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tên loại thuốc"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.name})]})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-chart-bar text-green-600"}),"Thống kê"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Số lượng thuốc"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.medicineCount})]}),e.jsx("div",{className:"text-blue-600",children:e.jsx("i",{className:"fa-solid fa-pills text-2xl"})})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"thuốc thuộc loại này"})]})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-file-text text-purple-600"}),"Mô tả"]}),e.jsx("div",{className:"text-gray-900 whitespace-pre-wrap",children:s.description||"Chưa có mô tả"})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},A=g=>{const{medicineCategorySelect:s,setShowEdit:o,onSuccess:u}=g,{execute:b,notify:x,loading:r}=y(),[l,a]=h.useState({name:"",description:""}),i=(n,t)=>{a(m=>({...m,[n]:t}))};h.useEffect(()=>{a({name:s.name||"",description:s.description||""})},[s]);const d=async n=>{n.preventDefault();const t=await b(T(s.id,l.name,l.description));x(t,"Cập nhật loại thuốc thành công"),t?.result&&(u?.(),o(!1))};return e.jsx("div",{className:"fixed top-0 start-0 bg-gray-400/60 w-full h-full z-10 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa loại thuốc - # ",s.id]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên loại thuốc *"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.name,placeholder:"Nhập tên loại thuốc",onChange:n=>i("name",n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",value:l.description,placeholder:"Mô tả về loại thuốc",onChange:n=>i("description",n.target.value)})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>o(!1),children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",disabled:r,children:r?"Đang cập nhật...":"Lưu thay đổi"})]})]})]})})},K=g=>{const{categories:s,onSuccess:o}=g,[u,b]=h.useState(1),[x,r]=h.useState(5),[l,a]=h.useState(!1),[i,d]=h.useState(!1),[n,t]=h.useState(null),m=p=>{t(p),a(!0)},f=p=>{t(p),d(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên loại thuốc"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Mô tả"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Số lượng thuốc"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s&&s.length>0?s.slice((u-1)*x,u*x).map((p,j)=>e.jsxs("tr",{className:`${j%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",p.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:p.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:p.description||"Không có mô tả"}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-blue-600",children:[p.medicineCount||0," thuốc"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>m(p),title:"Xem chi tiết",children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>f(p),title:"Chỉnh sửa",children:e.jsx("i",{className:"fa-solid fa-wrench"})})]})})]},p.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-layer-group text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có danh mục thuốc nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(v,{array:s,page:u,row:x,setPage:b,setRow:r}),l&&n&&e.jsx(V,{medicineCategorySelect:n,setShowDetail:a}),i&&n&&e.jsx(A,{medicineCategorySelect:n,setShowEdit:d,onSuccess:o})]})},L=g=>{const{onClose:s,onSuccess:o,categories:u}=g,{execute:b,notify:x,loading:r}=y(),[l,a]=h.useState({name:"",description:"",unit:"",price:"",manufacturer:"",minStock:"",maxStock:"",categoryId:""}),i=(t,m)=>{a(f=>({...f,[t]:m}))},d=async t=>{t.preventDefault();const m=await b(D(l));x(m,"Thêm thuốc thành công"),m?.result&&(o?.(),n())},n=()=>{a({name:"",description:"",unit:"",price:"",manufacturer:"",minStock:"",maxStock:"",categoryId:""}),s()};return e.jsx("div",{className:"fixed top-0 left-0 bg-gray-400/60 w-full h-full z-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white px-8 py-6 rounded-lg shadow-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Thêm thuốc mới"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",disabled:r,children:"x"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tên thuốc"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>i("name",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",placeholder:"Nhập tên thuốc",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Đơn vị tính"}),e.jsx("input",{type:"text",value:l.unit,onChange:t=>i("unit",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",placeholder:"VD: viên, ml, gói",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Giá bán (VNĐ)"}),e.jsx("input",{type:"number",value:l.price,onChange:t=>i("price",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",placeholder:"Nhập giá bán",min:"0",step:"0.01",disabled:r}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Number(l.price)>0&&`≈ ${N(Number(l.price))}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nhà sản xuất"}),e.jsx("input",{type:"text",value:l.manufacturer,onChange:t=>i("manufacturer",t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nhập nhà sản xuất (tùy chọn)",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loại thuốc"}),e.jsxs("select",{value:l.categoryId,onChange:t=>i("categoryId",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",disabled:r,children:[e.jsx("option",{value:"",children:"Chọn loại thuốc"}),u.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tồn kho tối thiểu"}),e.jsx("input",{type:"number",value:l.minStock,onChange:t=>i("minStock",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",placeholder:"Nhập số lượng tối thiểu",min:"0",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tồn kho tối đa"}),e.jsx("input",{type:"number",value:l.maxStock,onChange:t=>i("maxStock",t.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300 transition-colors",placeholder:"Nhập số lượng tối đa",min:"0",disabled:r})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mô tả"}),e.jsx("textarea",{value:l.description,onChange:t=>i("description",t.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nhập mô tả thuốc (tùy chọn)",rows:3,disabled:r})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",disabled:r,children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",onClick:d,disabled:r,children:r?"Đang thêm...":"Thêm thuốc"})]})]})]})})},O=g=>{const{onClose:s,onSuccess:o}=g,{execute:u,notify:b,loading:x}=y(),[r,l]=h.useState({name:"",description:""}),a=(n,t)=>{l(m=>({...m,[n]:t}))},i=()=>{l({name:"",description:""}),s()},d=async n=>{n.preventDefault();const t=await u(M(r));b(t,"Thêm mới loại thuốc thành công"),t?.result&&(i(),o?.())};return e.jsx("div",{className:"fixed top-0 left-0 bg-gray-400/60 w-full h-full z-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white px-8 py-6 rounded-lg shadow-lg w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Thêm loại thuốc mới"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",disabled:x,children:"x"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tên loại thuốc"}),e.jsx("input",{type:"text",value:r.name,onChange:n=>a("name",n.target.value),className:"w-full border rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors border-gray-300",placeholder:"Nhập tên loại thuốc",disabled:x})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mô tả"}),e.jsx("textarea",{value:r.description,onChange:n=>a("description",n.target.value),className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nhập mô tả loại thuốc (tùy chọn)",rows:3,disabled:x})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",disabled:x,children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",disabled:x,children:x?"Đang thêm...":"Thêm loại thuốc"})]})]})]})})};export{L as A,G as M,K as a,O as b};
