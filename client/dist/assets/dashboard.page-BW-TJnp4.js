import{u as N,r as n,j as e}from"./index-wOwRfMo4.js";import{a as p}from"./medicine.service-Cwwuf_rk.js";import{g as j}from"./account.service-mdvzvQaG.js";import{g as b}from"./appointment.service-pkTqRrMy.js";const D=()=>{const{execute:d,loading:m}=N(),[r,h]=n.useState([]),[i,g]=n.useState([]),[l,u]=n.useState([]),f=async()=>{const[s,a,x]=await Promise.all([d(p()),d(j()),d(b())]);s?.result&&h(s.data),a?.result&&g(a.data),x?.result&&u(x.data)};n.useEffect(()=>{f()},[]);const t={totalUsers:i.length,totalPatients:i.filter(s=>s.role==="USER").length,totalDoctors:i.filter(s=>s.role==="DOCTOR").length,totalAssistors:i.filter(s=>s.role==="ASSISTOR").length,totalAppointments:l.length,todayAppointments:l.filter(s=>{const a=new Date().toDateString();return new Date(s.time).toDateString()===a}).length,pendingAppointments:l.filter(s=>s.status==="PENDING").length,completedAppointments:l.filter(s=>s.status==="COMPLETED").length,totalMedicines:r.length,activeMedicines:r.filter(s=>s.status==="ACTIVE").length,lowStockMedicines:r.filter(s=>s.currentStock<=s.minStock).length,outOfStockMedicines:r.filter(s=>s.status==="OUT_OF_STOCK").length,totalStockValue:r.reduce((s,a)=>s+(a.price*a.currentStock||0),0)},c=l.sort((s,a)=>new Date(a.createdAt||0).getTime()-new Date(s.createdAt||0).getTime()).slice(0,5),o=r.filter(s=>s.currentStock<=s.minStock).slice(0,5);return m?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("main",{className:"p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Tổng quan hệ thống bệnh viện"})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-2 sm:mt-0",children:["Cập nhật lúc: ",new Date().toLocaleString("vi-VN")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-users text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tổng người dùng"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.jsxs("span",{children:["Bệnh nhân: ",t.totalPatients," • Bác sĩ: ",t.totalDoctors]})})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-check text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lịch hẹn"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalAppointments}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.jsxs("span",{children:["Hôm nay: ",t.todayAppointments," • Chờ: ",t.pendingAppointments]})})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-pills text-purple-600 text-xl"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Thuốc"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalMedicines}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.jsxs("span",{children:["Hoạt động: ",t.activeMedicines," • Sắp hết: ",t.lowStockMedicines]})})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-50 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-coins text-orange-600 text-xl"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Giá trị kho"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(t.totalStockValue/1e6).toFixed(1),"M"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.jsx("span",{children:"VNĐ"})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lịch hẹn gần đây"}),e.jsx("a",{href:"/admin/appointments",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Xem tất cả →"})]}),e.jsx("div",{className:"space-y-3",children:c.length>0?c.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.doctorName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(s.createdAt).toLocaleDateString("vi-VN")}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status==="COMPLETED"?"bg-green-100 text-green-800":s.status==="PENDING"?"bg-yellow-100 text-yellow-800":s.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status==="COMPLETED"?"Hoàn thành":s.status==="PENDING"?"Chờ xử lý":s.status==="CANCELLED"?"Đã hủy":"Khác"})]})]},s.id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Không có lịch hẹn nào"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Thuốc sắp hết hàng"}),e.jsx("a",{href:"/admin/medicine",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Xem tất cả →"})]}),e.jsx("div",{className:"space-y-3",children:o.length>0?o.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.categoryName})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-red-600",children:["Còn: ",s.currentStock]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Tối thiểu: ",s.minStock]})]})]},s.id)):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"Tất cả thuốc đều đủ số lượng"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thao tác nhanh"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("a",{href:"/admin/accounts",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-gray-50 transition-all",children:[e.jsx("i",{className:"fa-solid fa-user-plus text-gray-600 text-lg mr-3"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Thêm tài khoản"})]}),e.jsxs("a",{href:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-gray-50 transition-all",children:[e.jsx("i",{className:"fa-solid fa-calendar-plus text-gray-600 text-lg mr-3"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Tạo lịch hẹn"})]}),e.jsxs("a",{href:"/admin/medicine",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-gray-50 transition-all",children:[e.jsx("i",{className:"fa-solid fa-pills text-gray-600 text-lg mr-3"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Quản lý thuốc"})]}),e.jsxs("a",{href:"/admin/inventory",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-gray-50 transition-all",children:[e.jsx("i",{className:"fa-solid fa-boxes-stacked text-gray-600 text-lg mr-3"}),e.jsx("span",{className:"font-medium text-gray-700",children:"Nhập xuất kho"})]})]})]})]})};export{D as default};
