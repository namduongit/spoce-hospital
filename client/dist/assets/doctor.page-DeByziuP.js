import{u as k,b as I,r as o,j as e,c as F}from"./index-wOwRfMo4.js";import{e as T}from"./status.constant-BZ6KLHNH.js";import{c as R,u as M,b as B,d as G,g as P}from"./doctor.service-COjR-jbU.js";import{T as V}from"./pagination-DByYZh53.js";import{f as z}from"./format-date.util-D8g88DXU.js";import{w as D,t as H}from"./day.constant-DMwPPS57.js";import{g as $}from"./department.service-9tPTb8oj.js";const L=x=>{const l=["image/png","image/jpg","image/jpeg"];return{isValid:l.includes(x.type)&&x.size<=5242880,errorMessage:l.includes(x.type)?x.size>5242880?"File quá lớn! Vui lòng chọn file nhỏ hơn 5MB.":"":"Chỉ được phép chọn file PNG hoặc JPG!"}},E=[{id:1,name:"Nam",value:"MALE"},{id:2,name:"Nữ",value:"MALE"},{id:3,name:"Khác",value:"OTHER"}],W=x=>{const{setIsOpenCreateDoctor:l,departments:h,onSuccess:u}=x,{execute:j,notify:p,loading:g}=k(),{showToast:w}=I(),[r,i]=o.useState({image:"",email:"",password:"",passwordConfirm:"",fullName:"",birthDate:"",gender:"",departmentId:"",degree:"",phone:""}),c=(s,t)=>{i(n=>({...n,[s]:t}))},[b,N]=o.useState(""),[y,d]=o.useState(null),a=s=>{const t=s.target.files?.[0],n=L(t);if(!n.isValid){w("Cảnh báo",n.errorMessage,"warning");return}if(t&&n.isValid){d(t);const f=new FileReader;f.onload=C=>{N(C.target?.result)},f.readAsDataURL(t),c("image",t)}},m=()=>{N(""),d(null),l(!1)},v=async s=>{s.preventDefault();const t=await j(R(r));p(t,"Tạo bác sĩ thành công"),t?.result&&(m(),u?.())};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Tạo bác sĩ"}),e.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 text-xl w-8 h-8 flex items-center justify-center",children:"x"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("div",{className:"flex justify-center relative",children:b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Preview",className:"w-40 h-40 object-cover rounded-md border border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{N(""),d(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600 transition-colors",children:"x"})]}):e.jsx("div",{className:"w-40 h-40 bg-gray-100 rounded-md border border-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ảnh đại diện *"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpg,image/jpeg",onChange:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Chỉ chấp nhận file PNG, JPG (tối đa 5MB)"})]})]}),e.jsxs("div",{className:"flex-1 flex gap-2 flex-col",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email tài khoản *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập email",required:!0,value:r.email,onChange:s=>c("email",s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mật khẩu *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập mật khẩu",required:!0,value:r.password,onChange:s=>c("password",s.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mật khẩu xác nhận *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập mật khẩu xác nhận",required:!0,value:r.passwordConfirm,onChange:s=>c("passwordConfirm",s.target.value)})})]})]})]}),e.jsx("hr",{className:"text-gray-400 mb-2"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Thông tin bác sĩ"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Họ và tên *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập họ và tên",required:!0,value:r.fullName,onChange:s=>c("fullName",s.target.value)})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày sinh *"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,value:r.birthDate,onChange:s=>c("birthDate",s.target.value)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giới tính *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:r.gender,onChange:s=>c("gender",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn giới tính"}),E.map(s=>e.jsx("option",{value:s.value,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Khoa khám bệnh *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:r.departmentId,onChange:s=>c("departmentId",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn khoa khám bệnh"}),h&&h.length>0?h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id)):e.jsx("option",{disabled:!0,children:"Không có khoa nào"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trình độ *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập trình độ",required:!0,value:r.degree,onChange:s=>c("degree",s.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số điện thoại *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập số điện thoại",required:!0,value:r.phone,onChange:s=>c("phone",s.target.value)})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",children:"Đóng"}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",children:g?"Đang thêm...":"Thêm bác sĩ"})]})]})]})})},q=x=>{const{doctorSelect:l,setShowDetail:h}=x,u=p=>{switch(p){case"AVAILABLE":return"text-green-800";case"OFFLINE":return"text-red-800";case"BUSY":return"text-yellow-800";default:return"text-gray-800"}},j=p=>{switch(p){case"AVAILABLE":return"Đang làm";case"OFFLINE":return"Tạm nghỉ";case"BUSY":return"Đang bận";default:return p}};return e.jsx("div",{className:"fixed inset-0 bg-gray-500/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-doctor text-blue-600"}),"Chi tiết bác sĩ #",l.id]}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user text-blue-600"}),"Thông tin cá nhân"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Họ và tên"}),e.jsx("p",{className:"text-gray-900",children:l.fullName||"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:l.email||"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Số điện thoại"}),e.jsx("p",{className:"text-gray-900",children:l.phone?F(l.phone):"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Giới tính"}),e.jsx("p",{className:"text-gray-900",children:l.gender==="MALE"?"Nam":l.gender==="FEMALE"?"Nữ":"Khác"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Ngày sinh"}),e.jsx("p",{className:"text-gray-900",children:l.birthDate?z(new Date(l.birthDate)):"Chưa cập nhật"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-briefcase text-green-600"}),"Thông tin công việc"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Bằng cấp"}),e.jsx("p",{className:"text-gray-900",children:l.degree||"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Khoa"}),e.jsx("p",{className:"text-gray-900",children:l.departmentName||"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mã khoa"}),e.jsx("p",{className:"text-gray-900",children:l.departmentId||"Chưa cập nhật"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Trạng thái làm việc"}),e.jsx("span",{className:`font-bold ${u(l.status)}`,children:j(l.status)})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Đóng"})})]})})},K=x=>{const{doctorSelect:l,setShowEdit:h,departments:u,onSuccess:j}=x,{execute:p,notify:g,loading:w}=k(),{showToast:r}=I(),[i,c]=o.useState({fullName:"",gender:"",phone:"",birthDate:"",degree:"",status:"",departmentId:0}),[b,N]=o.useState(""),[y,d]=o.useState(null),a=(s,t)=>{c(n=>({...n,[s]:t}))},m=async s=>{if(s.preventDefault(),y&&!(await p(M(l.id,y)))?.result){r("Lỗi","Không thể cập nhật ảnh đại diện","error");return}const t=await p(B(l.id,i));g(t,"Cập nhật bác sĩ thành công"),t?.result&&(j?.(),h(!1))},v=s=>{const t=s.target.files?.[0];if(!t)return;const n=L(t);if(!n.isValid){r("Cảnh báo",n.errorMessage,"warning");return}d(t);const f=new FileReader;f.onload=C=>{N(C.target?.result)},f.readAsDataURL(t)};return o.useEffect(()=>{c({fullName:l.fullName??"",gender:l.gender??"",phone:l.phone??"",birthDate:l.birthDate??"",degree:l.degree??"",status:l.status??"",departmentId:l.departmentId!=null?l.departmentId:0}),N(l.image??""),d(null)},[l]),e.jsx("div",{className:"fixed top-0 start-0 bg-gray-400/60 w-full h-full z-10 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Sửa thông tin bác sĩ - # ",l.id]}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"x"})]}),e.jsxs("form",{className:"flex gap-10 items-center",onSubmit:m,children:[e.jsxs("div",{className:"flex-3",children:[e.jsx("div",{className:"flex justify-center relative",children:b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Preview",className:"w-40 h-40 object-cover rounded-md border border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{N(""),d(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600 transition-colors",children:"x"})]}):e.jsx("div",{className:"w-40 h-40 bg-gray-100 rounded-md border border-gray-300 flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ảnh đại diện *"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpg,image/jpeg",onChange:v}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Chỉ chấp nhận file PNG, JPG (tối đa 5MB)"})]})]}),e.jsxs("div",{className:"space-y-4 flex-5",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email tài khoản"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"email",className:"w-full px-3 py-2 border text-gray-600 border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!0,value:l.email})})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên bác sĩ"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i.fullName,placeholder:"Nhập họ và tên",onChange:s=>a("fullName",s.target.value)})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giới tính"}),e.jsxs("select",{name:"role",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i.gender,onChange:s=>a("gender",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn giới tính"}),E.map(s=>e.jsx("option",{value:s.value,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày sinh"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i.birthDate,onChange:s=>a("birthDate",s.target.value)})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số điện thoại"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0123 456 789",value:i.phone,onChange:s=>a("phone",s.target.value)})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Khoa khám *"}),e.jsxs("select",{name:"role",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i.departmentId,onChange:s=>a("departmentId",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn khoa khám"}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trạng thái *"}),e.jsxs("select",{name:"role",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:i.status,onChange:s=>a("status",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),T.map(s=>e.jsx("option",{value:s.value,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Học vị"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Thạc sĩ, Tiến sĩ...",value:i.degree,onChange:s=>a("degree",s.target.value)})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition",onClick:()=>h(!1),children:"Hủy"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50",disabled:w,children:w?"Đang cập nhật ...":"Lưu thay đổi"})]})]})]})]})})},O=x=>{const{doctorSelect:l,setShowCalendar:h,onSuccess:u}=x,{execute:j,notify:p,loading:g}=k(),w=l.workDay??"",[r,i]=o.useState(!1),[c,b]=o.useState({}),N=s=>c[s]&&c[s].length>0,y=()=>{h(!1)},d=()=>{r&&b({})},a=(s,t)=>{if(r)if(c[t]&&c[t].includes(s)){const n=c[t].filter(f=>f!==s);b(f=>({...f,[t]:n}))}else{const n=c[t]||[];n.push(s),n.sort(),b(f=>({...f,[t]:n}))}},m=()=>{var s="";for(let t in c)s+=t+"; "+c[t].join(", ")+"<br/>";return s},v=async()=>{const s=await j(G(l.id,m()));p(s,"Cập nhật lịch làm việc thành công"),s?.result&&(h(!1),u?.())};return o.useEffect(()=>{const s=w.trim().split("<br/>").map(n=>n.trim()),t={};s.forEach(n=>{const[f,C]=n.split(";");if(f&&C){const S=C.trim().split(",").map(A=>A.trim());t[f.trim()]=S}}),b(t)},[]),e.jsx("div",{className:"space-y-2 fixed top-0 start-0 bg-gray-900/50 w-full h-full z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white px-4 sm:px-6 py-5 space-y-5 rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 flex items-center",children:[e.jsx("i",{className:"fa-solid fa-calendar-days mr-2 text-blue-600"}),"Lịch làm việc của bác sĩ"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("i",{className:"fa-solid fa-user-md mr-1"}),l.fullName]})]}),e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full w-10 h-10 flex items-center justify-center transition-colors absolute top-4 right-4 sm:relative sm:top-0 sm:right-0",title:"Đóng",children:e.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Chú thích:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-green-300 rounded border border-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ca làm việc"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-100 rounded border border-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Thời gian trống"})]})]}),e.jsx("div",{className:"transition-all duration-300 rounded-lg px-4 py-2",children:e.jsxs("label",{className:"flex gap-3 items-center cursor-pointer",children:[e.jsx("span",{className:"font-semibold transition-colors",children:r?"Đang chỉnh sửa":"Chế độ xem"}),e.jsx("div",{className:"checkbox-wrapper-14",children:e.jsx("input",{id:"s1-14",type:"checkbox",className:"switch",checked:r,onChange:()=>i(!r)})})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 text-white font-medium",children:[e.jsxs("th",{className:"px-4 sm:px-6 py-3 border-2 border-white text-left min-w-[100px] sm:min-w-[120px]",children:[e.jsx("i",{className:"fa-solid fa-clock mr-2"}),"Giờ / Ngày"]}),D.map(s=>e.jsx("th",{className:"px-4 sm:px-8 py-3 border-2 border-white text-center min-w-[80px] sm:min-w-[100px]",children:s},s))]})}),e.jsx("tbody",{children:H.map((s,t)=>e.jsxs("tr",{className:`transition-colors ${r?"hover:bg-blue-50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"py-3 px-4 text-center border-2 border-white font-medium bg-gray-50 text-gray-700",children:s.name}),D.map(n=>N(n)?c[n].includes(s.name.replace("Tiết","").trim())?e.jsx("td",{className:`border-2 border-white text-center bg-green-300 h-12 relative group ${r?"cursor-pointer hover:bg-green-400 hover:ring-2 hover:ring-inset hover:ring-green-600":""}`,onClick:()=>a(s.name.replace("Tiết","").trim(),n),children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:`fa-solid ${r?"fa-times text-red-600":"fa-check text-green-700"}`})})},n):e.jsx("td",{className:`border-2 border-white text-center bg-gray-100 h-12 ${r?"cursor-pointer hover:bg-blue-100 hover:ring-2 hover:ring-inset hover:ring-blue-400":""}`,onClick:()=>a(s.name.replace("Tiết","").trim(),n),children:r&&e.jsx("div",{className:"opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fa-solid fa-plus text-gray-400"})})},n):e.jsx("td",{className:`border-2 border-white text-center bg-gray-100 h-12 ${r?"cursor-pointer hover:bg-blue-100 hover:ring-2 hover:ring-inset hover:ring-blue-400":""}`,onClick:()=>a(s.name.replace("Tiết","").trim(),n)},n))]},t))})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:y,className:"px-6 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition font-medium",children:"Hủy"}),e.jsx("button",{type:"button",onClick:d,disabled:!r||g,className:`px-6 py-2.5 rounded-lg transition font-medium ${!r||g?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 hover:shadow-lg"}`,children:"Xóa hết"}),e.jsx("button",{type:"submit",className:`px-6 py-2.5 rounded-lg transition font-medium ${g?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg"}`,onClick:v,disabled:g,children:g?"Đang cập nhật...":"Cập nhật lịch"})]})]})})},U=x=>{const{doctors:l,departments:h,onSuccess:u}=x,[j,p]=o.useState(1),[g,w]=o.useState(5),[r,i]=o.useState(!1),[c,b]=o.useState(!1),[N,y]=o.useState(!1),[d,a]=o.useState({}),m=t=>{a(t),i(!0)},v=t=>{a(t),b(!0)},s=t=>{a(t),y(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"# ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tài khoản"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Tên bác sĩ"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Thuộc khoa"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Trạng thái"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Hành động"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l&&l.length>0?l.slice((j-1)*g,j*g).map((t,n)=>e.jsxs("tr",{className:`${n%2===0?"bg-gray-50":"bg-white"} hover:bg-blue-50 transition-colors`,children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:["# ",t.id]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:t.email}),e.jsx("td",{className:`px-4 py-3 text-sm text-gray-700 font-medium ${!t.fullName&&"italic"}`,children:t.fullName&&t.fullName!==""?t.fullName:"Chưa cập nhật"}),e.jsx("td",{className:`px-4 py-3 text-sm text-gray-700 font-medium ${!t.departmentName&&"italic"}`,children:t.departmentName&&t.departmentName!==""?t.departmentName:"Chưa có khoa"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 font-medium",children:[t.status==="AVAILABLE"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold",children:"Đang làm"}),t.status==="OFFLINE"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-red-100 text-red-800 text-xs font-semibold",children:"Tạm nghỉ"}),t.status==="BUSY"&&e.jsx("span",{className:"px-2 py-1 rounded-full bg-yellow-100 text-yellow-800 text-xs font-semibold",children:"Đang bận"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>m(t),children:e.jsx("i",{className:"fa-solid fa-info"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>s(t),children:e.jsx("i",{className:"fa-solid fa-calendar-days"})}),e.jsx("button",{className:"px-0.75 py-0.75 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>v(t),children:e.jsx("i",{className:"fa-solid fa-wrench"})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fa-solid fa-user-doctor text-4xl mb-3 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Không có bác sĩ nào"}),e.jsx("p",{className:"text-sm mt-1",children:"Chưa có dữ liệu để hiển thị"})]})})})})]}),e.jsx(V,{array:x.doctors,page:j,row:g,setPage:p,setRow:w}),r&&d&&e.jsx(q,{doctorSelect:d,setShowDetail:i,onSuccess:u}),c&&d&&e.jsx(K,{doctorSelect:d,departments:h,onSuccess:u,setShowEdit:b}),N&&d&&e.jsx(O,{doctorSelect:d,setShowCalendar:y,onSuccess:u})]})},se=()=>{const{execute:x}=k(),[l,h]=o.useState([]),[u,j]=o.useState([]),[p,g]=o.useState([]),[w,r]=o.useState(!1),[i,c]=o.useState({input:"",status:"",departmentId:""}),b=(a,m)=>{c(v=>({...v,[a]:m}))},N=async()=>{const a=await x($());if(a?.result){const m=a.data;h(Array.isArray(m)?m:[])}},y=async()=>{const a=await x(P());if(a?.result){const m=a.data;j(Array.isArray(m)?m:[]),g(Array.isArray(m)?m:[])}};o.useEffect(()=>{g(u.filter(a=>{const m=i.input===""||a.fullName?.toLowerCase().includes(i.input.toLowerCase())||a.id?.toString().includes(i.input),v=i.status===""||a.status===i.status,s=i.departmentId===""||a.departmentId?.toString()===i.departmentId;return m&&v&&s}))},[i,u]),o.useEffect(()=>{N(),y()},[]);const d={totalDoctors:u.length,totalDepartments:l.length,availableDoctors:u.filter(a=>a.status==="AVAILABLE").length,busyDoctors:u.filter(a=>a.status==="BUSY").length,onLeaveDoctors:u.filter(a=>a.status==="OFFLINE").length};return e.jsxs("main",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-blue-700 mb-2 sm:mb-0",children:"Quản lý thông tin bác sĩ"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Quản lý thông tin các bác sĩ trong bệnh viện"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Tổng: ",e.jsx("span",{className:"font-semibold text-blue-600",children:d.totalDoctors})," bác sĩ"]}),e.jsxs("div",{children:["Hoạt động: ",e.jsx("span",{className:"font-semibold text-green-600",children:d.availableDoctors})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-user-md text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng bác sĩ"}),e.jsx("p",{className:"text-lg font-semibold",children:d.totalDoctors})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-building text-purple-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng khoa"}),e.jsx("p",{className:"text-lg font-semibold",children:d.totalDepartments})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-check-circle text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Đang làm việc"}),e.jsx("p",{className:"text-lg font-semibold",children:d.availableDoctors})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-check text-orange-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Đang bận"}),e.jsx("p",{className:"text-lg font-semibold",children:d.busyDoctors})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-person-arrow-down-to-line text-red-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tạm nghỉ"}),e.jsx("p",{className:"text-lg font-semibold",children:d.onLeaveDoctors})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:space-x-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Tìm kiếm"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-md py-2 pl-10 pr-4 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Tìm kiếm theo tên hoặc id ...",value:i.input,onChange:a=>b("input",a.target.value)})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Trạng thái"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:i.status,onChange:a=>b("status",a.target.value),children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),T.map(a=>e.jsx("option",{value:a.value,children:a.name},a.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Chọn khoa"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:i.departmentId,onChange:a=>b("departmentId",a.target.value),children:[e.jsx("option",{value:"",children:"Chọn khoa"}),l.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]}),e.jsx("div",{className:"flex justify-end items-center gap-2",children:e.jsxs("button",{className:"font-semibold bg-blue-600 text-white hover:text-blue-600 hover:bg-white hover:ring-3 hover:ring-blue-600 px-4 py-2 rounded shadow cursor-pointer flex items-center",onClick:()=>r(!0),children:[e.jsx("i",{className:"fa-solid fa-plus me-2"}),e.jsx("span",{children:"Thêm bác sĩ"})]})})]}),e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(U,{doctors:p,departments:l,onSuccess:y})})})]}),w&&e.jsx(W,{setIsOpenCreateDoctor:r,departments:l,onSuccess:y})]})};export{se as default};
