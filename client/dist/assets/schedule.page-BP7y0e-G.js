import{u as w,r as n,j as e}from"./index-wOwRfMo4.js";import{w as x,t as k}from"./day.constant-DMwPPS57.js";import{a as S}from"./doctor.service-COjR-jbU.js";const A=()=>{const{execute:h}=w(),[l,g]=n.useState({}),[r,b]=n.useState({}),u=async()=>{const s=await h(S());if(s?.result){const t=s.data;g(t);const c=(t.profile?.workDay??"").trim().split("<br/>").map(i=>i.trim()),d={};c.forEach(i=>{const[m,o]=i.split(";");if(m&&o){const v=o.trim().split(",").map(y=>y.trim());d[m.trim()]=v}}),b(d)}};n.useEffect(()=>{u()},[]);const j=s=>r[s]&&r[s].length>0,p=s=>{switch(s){case"AVAILABLE":return"bg-green-100 text-green-800";case"BUSY":return"bg-orange-100 text-orange-800";case"OFFLINE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=s=>{switch(s){case"AVAILABLE":return"Sẵn sàng";case"BUSY":return"Bận";case"OFFLINE":return"Offline";default:return"Không xác định"}},N=Object.values(r).reduce((s,t)=>s+t.length,0);return e.jsx("main",{className:"schedule-page p-4 sm:p-6",children:e.jsxs("div",{className:"schedule-page__wrap max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:"Lịch làm việc của tôi"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Xem lịch làm việc trong tuần"})]}),e.jsx("div",{className:"mt-3 sm:mt-0",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${p(l.profile?.status||"")}`,children:[e.jsx("i",{className:"fa-solid fa-circle-dot mr-1"}),f(l.profile?.status||"")]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-user-md text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bác sĩ"}),e.jsx("p",{className:"text-lg font-semibold truncate",children:l.profile?.fullName||"..."})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-building text-purple-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Khoa"}),e.jsx("p",{className:"text-lg font-semibold truncate",children:l.profile?.departmentName||"..."})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-check text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Số ca làm"}),e.jsxs("p",{className:"text-lg font-semibold",children:[N," ca/tuần"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-days text-orange-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Số ngày làm"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Object.keys(r).length," ngày/tuần"]})]})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex items-start space-x-3",children:[e.jsx("i",{className:"fa-solid fa-info-circle text-blue-600 text-xl mt-0.5"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Lưu ý:"})," Đây là lịch làm việc được cấu hình bởi quản trị viên. Nếu cần thay đổi, vui lòng liên hệ với quản lý."]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Chú thích:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-green-300 rounded border border-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ca làm việc"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-100 rounded border border-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Thời gian trống"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 text-white font-medium",children:[e.jsxs("th",{className:"px-6 py-3 border-2 border-white text-left min-w-[120px]",children:[e.jsx("i",{className:"fa-solid fa-clock mr-2"}),"Giờ / Ngày"]}),x.map(s=>e.jsx("th",{className:"px-8 py-3 border-2 border-white text-center min-w-[100px]",children:s},s))]})}),e.jsx("tbody",{children:k.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-center border-2 border-white font-medium bg-gray-50 text-gray-700",children:s.name}),x.map(a=>j(a)?r[a].includes(s.name.replace("Tiết","").trim())?e.jsx("td",{className:"border-2 border-white text-center bg-green-300 h-12 relative group",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fa-solid fa-check text-green-700"})})},a):e.jsx("td",{className:"border-2 border-white text-center bg-gray-100 h-12"},a):e.jsx("td",{className:"border-2 border-white text-center bg-gray-100 h-12"},a))]},t))})]})})}),Object.keys(r).length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-list-check mr-2 text-blue-600"}),"Chi tiết lịch làm việc"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r).map(([s,t])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-blue-600 mr-2"}),e.jsx("span",{className:"font-semibold text-gray-800",children:s})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((a,c)=>e.jsxs("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:["Tiết ",a]},c))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[t.length," ca làm việc"]})]},s))})]}),Object.keys(r).length===0&&e.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-calendar-xmark text-gray-300 text-5xl mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Chưa có lịch làm việc"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Vui lòng liên hệ quản trị viên để được cấu hình lịch làm việc"})]})})]})})};export{A as default};
