import{u as f,r as c,j as e}from"./index-wOwRfMo4.js";import{g as b}from"./medical-package.service-WOpOC3JI.js";import{M as j,A as v}from"./medical-package.table-FagSOp2K.js";import{m as N,b as y}from"./status.constant-BZ6KLHNH.js";import"./pagination-DByYZh53.js";const A=()=>{const{execute:g}=f(),[r,h]=c.useState([]),[m,d]=c.useState([]),[u,x]=c.useState(!1),[l,p]=c.useState({input:"",status:"",price:""}),n=(s,a)=>{p(i=>({...i,[s]:a}))},o=async()=>{const s=await g(b());if(s?.result){const a=s.data;h(Array.isArray(a)?a:[]),d(Array.isArray(a)?a:[])}};c.useEffect(()=>{if(d(r.filter(s=>{const a=l.input===""||s.name?.toLowerCase().includes(l.input.toLowerCase())||s.id?.toString().includes(l.input),i=l.status===""||s.status===l.status;return a&&i})),l.price!==""){const s=[...m].sort((a,i)=>l.price==="ASC"?(a.price||0)-(i.price||0):l.price==="DESC"?(i.price||0)-(a.price||0):0);d(s)}},[l,r]),c.useEffect(()=>{o()},[]);const t={totalPackages:r.length,activePackages:r.filter(s=>s.status==="ACTIVE").length,inactivePackages:r.filter(s=>s.status==="INACTIVE").length,totalValue:r.reduce((s,a)=>s+(a.price||0),0),averagePrice:r.length>0?r.reduce((s,a)=>s+(a.price||0),0)/r.length:0,popularPackages:r.filter(s=>s.status==="ACTIVE").slice(0,3)};return e.jsxs("main",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-blue-700 mb-2 sm:mb-0",children:"Quản lý gói dịch vụ khám"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Quản lý các gói khám bệnh trong bệnh viện"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Tổng: ",e.jsx("span",{className:"font-semibold text-blue-600",children:t.totalPackages})," gói dịch vụ"]}),e.jsxs("div",{children:["Hoạt động: ",e.jsx("span",{className:"font-semibold text-green-600",children:t.activePackages})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-box text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng gói dịch vụ"}),e.jsx("p",{className:"text-lg font-semibold",children:t.totalPackages})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-check-circle text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Đang hoạt động"}),e.jsx("p",{className:"text-lg font-semibold",children:t.activePackages})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Không hoạt động"}),e.jsx("p",{className:"text-lg font-semibold",children:t.inactivePackages})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-money-bill text-purple-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tổng giá trị"}),e.jsxs("p",{className:"text-lg font-semibold",children:[t.totalValue.toLocaleString(),"đ"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-chart-line text-orange-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Giá trung bình"}),e.jsxs("p",{className:"text-lg font-semibold",children:[t.averagePrice.toLocaleString(),"đ"]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:space-x-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),e.jsx("input",{type:"text",value:l.input,onChange:s=>n("input",s.target.value),className:"border border-gray-300 rounded-md py-2 pl-10 pr-4 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Tìm kiếm theo tên hoặc id ..."})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:l.status,onChange:s=>n("status",s.target.value),children:[e.jsx("option",{value:"",children:"Chọn trạng thái"}),N.map(s=>e.jsx("option",{value:s.value,children:s.name},s.id))]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{className:"w-full border border-gray-300 rounded-md py-2 px-3 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:l.price,onChange:s=>n("price",s.target.value),children:[e.jsx("option",{value:"",children:"Sắp xếp tiền theo"}),y.map(s=>e.jsx("option",{value:s.value,children:s.name},s.id))]})})]}),e.jsx("div",{className:"flex justify-end items-center gap-2",children:e.jsxs("button",{className:"font-semibold bg-blue-600 text-white hover:text-blue-600 hover:bg-white hover:ring-3 hover:ring-blue-600 px-4 py-2 rounded shadow cursor-pointer flex items-center",onClick:()=>x(!0),children:[e.jsx("i",{className:"fa-solid fa-plus me-2"}),e.jsx("span",{children:"Thêm gói dịch vụ"})]})})]}),e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(j,{medicalPackages:m,onSuccess:o})})})]}),u&&e.jsx(v,{setIsOpenCreateMedicalPackage:x,onSuccess:o})]})};export{A as default};
