import{u as A,r as c,j as e}from"./index-wOwRfMo4.js";import{w as u,t as E}from"./day.constant-DMwPPS57.js";import{g as I}from"./doctor.service-COjR-jbU.js";const F=()=>{const{execute:j}=A(),[n,p]=c.useState([]),[r,N]=c.useState(null),[l,f]=c.useState({}),[i,y]=c.useState(""),[o,x]=c.useState([]),v=async()=>{const s=await j(I());if(s?.result){const t=s.data,a=Array.isArray(t)?t:[];p(a),x(a),a.length>0&&g(a[0])}},g=s=>{N(s);const a=(s.workDay??"").trim().split("<br/>").map(m=>m.trim()),d={};a.forEach(m=>{const[h,b]=m.split(";");if(h&&b){const C=b.trim().split(",").map(D=>D.trim());d[h.trim()]=C}}),f(d)};c.useEffect(()=>{v()},[]),c.useEffect(()=>{if(i.trim()==="")x(n);else{const s=n.filter(t=>t.fullName?.toLowerCase().includes(i.toLowerCase())||t.email?.toLowerCase().includes(i.toLowerCase())||t.departmentName?.toLowerCase().includes(i.toLowerCase()));x(s)}},[i,n]);const w=s=>l[s]&&l[s].length>0,S=s=>{switch(s){case"AVAILABLE":return"bg-green-100 text-green-800";case"BUSY":return"bg-orange-100 text-orange-800";case"OFFLINE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=s=>{switch(s){case"AVAILABLE":return"Sẵn sàng";case"BUSY":return"Bận";case"OFFLINE":return"Offline";default:return"Không xác định"}},L=Object.values(l).reduce((s,t)=>s+t.length,0);return e.jsx("main",{className:"doctor-schedule-page p-4 sm:p-6",children:e.jsxs("div",{className:"doctor-schedule-page__wrap max-w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:"Lịch làm việc bác sĩ"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Xem lịch làm việc của các bác sĩ trong hệ thống"})]}),e.jsx("div",{className:"mt-3 sm:mt-0 text-sm text-gray-600",children:e.jsxs("div",{children:["Tổng: ",e.jsx("span",{className:"font-semibold text-blue-600",children:n.length})," bác sĩ"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-md py-2 pl-10 pr-4 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Tìm bác sĩ...",value:i,onChange:s=>y(s.target.value)})]})}),e.jsxs("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-3 sticky top-0 bg-white py-2",children:[e.jsx("i",{className:"fa-solid fa-user-doctor mr-2 text-blue-600"}),"Danh sách bác sĩ (",o.length,")"]}),o.length>0?o.map(s=>e.jsx("div",{onClick:()=>g(s),className:`p-3 rounded-lg border cursor-pointer transition-all ${r?.id===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.image||"/default-avatar.png",alt:s.fullName,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-gray-800 truncate",children:s.fullName}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.departmentName}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:s.email})]})]})},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa-solid fa-user-slash text-gray-300 text-3xl mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Không tìm thấy bác sĩ"})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:r.image||"/default-avatar.png",alt:r.fullName,className:"w-16 h-16 rounded-full object-cover border-2 border-blue-200"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800",children:r.fullName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fa-solid fa-building mr-1"}),r.departmentName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("i",{className:"fa-solid fa-graduation-cap mr-1"}),r.degree]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S(r.status||"")}`,children:[e.jsx("i",{className:"fa-solid fa-circle-dot mr-1"}),k(r.status||"")]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-check text-green-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Số ca làm"}),e.jsxs("p",{className:"text-lg font-semibold",children:[L," ca/tuần"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-calendar-days text-orange-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Số ngày làm"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Object.keys(l).length," ngày/tuần"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-phone text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Số điện thoại"}),e.jsx("p",{className:"text-lg font-semibold",children:r.phone})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[e.jsx("h4",{className:"font-semibold text-gray-700",children:"Chú thích:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-green-300 rounded border border-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ca làm việc"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-100 rounded border border-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Thời gian trống"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 text-white font-medium",children:[e.jsxs("th",{className:"px-6 py-3 border-2 border-white text-left min-w-[120px]",children:[e.jsx("i",{className:"fa-solid fa-clock mr-2"}),"Giờ / Ngày"]}),u.map(s=>e.jsx("th",{className:"px-8 py-3 border-2 border-white text-center min-w-[100px]",children:s},s))]})}),e.jsx("tbody",{children:E.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-center border-2 border-white font-medium bg-gray-50 text-gray-700",children:s.name}),u.map(a=>w(a)?l[a].includes(s.name.replace("Tiết","").trim())?e.jsx("td",{className:"border-2 border-white text-center bg-green-300 h-12 relative group",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"fa-solid fa-check text-green-700"})})},a):e.jsx("td",{className:"border-2 border-white text-center bg-gray-100 h-12"},a):e.jsx("td",{className:"border-2 border-white text-center bg-gray-100 h-12"},a))]},t))})]})})}),Object.keys(l).length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-list-check mr-2 text-blue-600"}),"Chi tiết lịch làm việc"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(l).map(([s,t])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:"fa-solid fa-calendar text-blue-600 mr-2"}),e.jsx("span",{className:"font-semibold text-gray-800",children:s})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((a,d)=>e.jsxs("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:["Tiết ",a]},d))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[t.length," ca làm việc"]})]},s))})]}),Object.keys(l).length===0&&e.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-calendar-xmark text-gray-300 text-5xl mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Bác sĩ này chưa có lịch làm việc"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Lịch làm việc chưa được cấu hình"})]})})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa-solid fa-hand-pointer text-gray-300 text-5xl mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Chọn bác sĩ để xem lịch làm việc"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Vui lòng chọn một bác sĩ từ danh sách bên trái"})]})})})]})]})})};export{F as default};
